<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>module_host.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AsyncEventEmitter.html">AsyncEventEmitter</a><ul class='methods'><li data-type='method'><a href="AsyncEventEmitter.html#emit">emit</a></li><li data-type='method'><a href="AsyncEventEmitter.html#off">off</a></li><li data-type='method'><a href="AsyncEventEmitter.html#on">on</a></li><li data-type='method'><a href="AsyncEventEmitter.html#onAll">onAll</a></li><li data-type='method'><a href="AsyncEventEmitter.html#onAllOnce">onAllOnce</a></li><li data-type='method'><a href="AsyncEventEmitter.html#once">once</a></li><li data-type='method'><a href="AsyncEventEmitter.html#removeAllListeners">removeAllListeners</a></li></ul></li><li><a href="CandlesDataPlugin.html">CandlesDataPlugin</a><ul class='methods'><li data-type='method'><a href="CandlesDataPlugin.html#emit">emit</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getCandleData">getCandleData</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getID">getID</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="CandlesDataPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="CandlesDataPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="CandlesDataPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="CandlesDataPlugin.html#on">on</a></li><li data-type='method'><a href="CandlesDataPlugin.html#render">render</a></li></ul></li><li><a href="ErrorHandlerSelfTestError.html">ErrorHandlerSelfTestError</a></li><li><a href="InternalLogWidget.html">InternalLogWidget</a><ul class='methods'><li data-type='method'><a href="InternalLogWidget.html#onHostError">onHostError</a></li><li data-type='method'><a href="InternalLogWidget.html#onTerminalDebugLog">onTerminalDebugLog</a></li><li data-type='method'><a href="InternalLogWidget.html#onTerminalDebugLogClearLastLine">onTerminalDebugLogClearLastLine</a></li><li data-type='method'><a href="InternalLogWidget.html#onWSError">onWSError</a></li></ul></li><li><a href="LoggerPlugin.html">LoggerPlugin</a><ul class='methods'><li data-type='method'><a href="LoggerPlugin.html#clearLogOutput">clearLogOutput</a></li><li data-type='method'><a href="LoggerPlugin.html#emit">emit</a></li><li data-type='method'><a href="LoggerPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="LoggerPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="LoggerPlugin.html#getID">getID</a></li><li data-type='method'><a href="LoggerPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="LoggerPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="LoggerPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="LoggerPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="LoggerPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="LoggerPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="LoggerPlugin.html#logDebugClearLastLine">logDebugClearLastLine</a></li><li data-type='method'><a href="LoggerPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="LoggerPlugin.html#logOutput">logOutput</a></li><li data-type='method'><a href="LoggerPlugin.html#on">on</a></li><li data-type='method'><a href="LoggerPlugin.html#render">render</a></li></ul></li><li><a href="MarginInfoDataPlugin.html">MarginInfoDataPlugin</a><ul class='methods'><li data-type='method'><a href="MarginInfoDataPlugin.html#emit">emit</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getID">getID</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getMarginInfo">getMarginInfo</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#on">on</a></li><li data-type='method'><a href="MarginInfoDataPlugin.html#render">render</a></li></ul></li><li><a href="MarketInfoDataPlugin.html">MarketInfoDataPlugin</a><ul class='methods'><li data-type='method'><a href="MarketInfoDataPlugin.html#emit">emit</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getID">getID</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getMarketInfo">getMarketInfo</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#on">on</a></li><li data-type='method'><a href="MarketInfoDataPlugin.html#render">render</a></li></ul></li><li><a href="Module.html">Module</a><ul class='methods'><li data-type='method'><a href="Module.html#emit">emit</a></li><li data-type='method'><a href="Module.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="Module.html#getHost">getHost</a></li><li data-type='method'><a href="Module.html#getID">getID</a></li><li data-type='method'><a href="Module.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="Module.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="Module.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="Module.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="Module.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="Module.html#isUnique">isUnique</a></li><li data-type='method'><a href="Module.html#logDuration">logDuration</a></li><li data-type='method'><a href="Module.html#on">on</a></li><li data-type='method'><a href="Module.html#render">render</a></li></ul></li><li><a href="ModuleAddError.html">ModuleAddError</a></li><li><a href="ModuleHost.html">ModuleHost</a><ul class='members'><li data-type='member'><a href="ModuleHost.html#.HOST_PROVIDED_HOOKS">HOST_PROVIDED_HOOKS</a></li><li data-type='member'><a href="ModuleHost.html#.HOST_REQUIRED_MODULES">HOST_REQUIRED_MODULES</a></li></ul><ul class='methods'><li data-type='method'><a href="ModuleHost.html#.logDuration">logDuration</a></li><li data-type='method'><a href="ModuleHost.html#addModule">addModule</a></li><li data-type='method'><a href="ModuleHost.html#boot">boot</a></li><li data-type='method'><a href="ModuleHost.html#emit">emit</a></li><li data-type='method'><a href="ModuleHost.html#getAllModuleIDs">getAllModuleIDs</a></li><li data-type='method'><a href="ModuleHost.html#getAllProvidedHooks">getAllProvidedHooks</a></li><li data-type='method'><a href="ModuleHost.html#getModuleProvidedHooks">getModuleProvidedHooks</a></li><li data-type='method'><a href="ModuleHost.html#getModules">getModules</a></li><li data-type='method'><a href="ModuleHost.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="ModuleHost.html#isBooted">isBooted</a></li><li data-type='method'><a href="ModuleHost.html#off">off</a></li><li data-type='method'><a href="ModuleHost.html#on">on</a></li><li data-type='method'><a href="ModuleHost.html#onAll">onAll</a></li><li data-type='method'><a href="ModuleHost.html#onAllOnce">onAllOnce</a></li><li data-type='method'><a href="ModuleHost.html#once">once</a></li><li data-type='method'><a href="ModuleHost.html#removeAllListeners">removeAllListeners</a></li><li data-type='method'><a href="ModuleHost.html#validateHostRequirements">validateHostRequirements</a></li><li data-type='method'><a href="ModuleHost.html#validateModuleRequirements">validateModuleRequirements</a></li></ul></li><li><a href="ModuleHostBootError.html">ModuleHostBootError</a></li><li><a href="ModuleHostValidationError.html">ModuleHostValidationError</a></li><li><a href="NotificationsPlugin.html">NotificationsPlugin</a><ul class='methods'><li data-type='method'><a href="NotificationsPlugin.html#getNotificationsEnabled">getNotificationsEnabled</a></li><li data-type='method'><a href="NotificationsPlugin.html#notify">notify</a></li><li data-type='method'><a href="NotificationsPlugin.html#notifyError">notifyError</a></li><li data-type='method'><a href="NotificationsPlugin.html#notifySuccess">notifySuccess</a></li><li data-type='method'><a href="NotificationsPlugin.html#setNotificationsEnabled">setNotificationsEnabled</a></li></ul></li><li><a href="OrderBooksDataPlugin.html">OrderBooksDataPlugin</a></li><li><a href="OrdersDataPlugin.html">OrdersDataPlugin</a><ul class='methods'><li data-type='method'><a href="OrdersDataPlugin.html#emit">emit</a></li><li data-type='method'><a href="OrdersDataPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="OrdersDataPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="OrdersDataPlugin.html#getID">getID</a></li><li data-type='method'><a href="OrdersDataPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="OrdersDataPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="OrdersDataPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="OrdersDataPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="OrdersDataPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="OrdersDataPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="OrdersDataPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="OrdersDataPlugin.html#on">on</a></li><li data-type='method'><a href="OrdersDataPlugin.html#render">render</a></li></ul></li><li><a href="Plugin.html">Plugin</a><ul class='methods'><li data-type='method'><a href="Plugin.html#emit">emit</a></li><li data-type='method'><a href="Plugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="Plugin.html#getHost">getHost</a></li><li data-type='method'><a href="Plugin.html#getID">getID</a></li><li data-type='method'><a href="Plugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="Plugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="Plugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="Plugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="Plugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="Plugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="Plugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="Plugin.html#on">on</a></li><li data-type='method'><a href="Plugin.html#render">render</a></li></ul></li><li><a href="PositionsDataPlugin.html">PositionsDataPlugin</a><ul class='methods'><li data-type='method'><a href="PositionsDataPlugin.html#emit">emit</a></li><li data-type='method'><a href="PositionsDataPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="PositionsDataPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="PositionsDataPlugin.html#getID">getID</a></li><li data-type='method'><a href="PositionsDataPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="PositionsDataPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="PositionsDataPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="PositionsDataPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="PositionsDataPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="PositionsDataPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="PositionsDataPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="PositionsDataPlugin.html#on">on</a></li><li data-type='method'><a href="PositionsDataPlugin.html#render">render</a></li></ul></li><li><a href="PublicTradeLogWidget.html">PublicTradeLogWidget</a></li><li><a href="SettingsPlugin.html">SettingsPlugin</a><ul class='methods'><li data-type='method'><a href="SettingsPlugin.html#clearSettings">clearSettings</a></li><li data-type='method'><a href="SettingsPlugin.html#defineSetting">defineSetting</a></li><li data-type='method'><a href="SettingsPlugin.html#getSetting">getSetting</a></li><li data-type='method'><a href="SettingsPlugin.html#listSettings">listSettings</a></li><li data-type='method'><a href="SettingsPlugin.html#notifyListeners">notifyListeners</a></li><li data-type='method'><a href="SettingsPlugin.html#removeSetting">removeSetting</a></li><li data-type='method'><a href="SettingsPlugin.html#setSetting">setSetting</a></li><li data-type='method'><a href="SettingsPlugin.html#subscribeSetting">subscribeSetting</a></li><li data-type='method'><a href="SettingsPlugin.html#unsubscribeSetting">unsubscribeSetting</a></li><li data-type='method'><a href="SettingsPlugin.html#validate">validate</a></li></ul></li><li><a href="Terminal.html">Terminal</a><ul class='methods'><li data-type='method'><a href="Terminal.html#notifyImportant">notifyImportant</a></li><li data-type='method'><a href="Terminal.html#onBoot">onBoot</a></li><li data-type='method'><a href="Terminal.html#render">render</a></li></ul></li><li><a href="TradeGroupSizeAlertsPlugin.html">TradeGroupSizeAlertsPlugin</a><ul class='methods'><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#emit">emit</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getGroupSizeAlertThreshold">getGroupSizeAlertThreshold</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getID">getID</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#on">on</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#render">render</a></li><li data-type='method'><a href="TradeGroupSizeAlertsPlugin.html#setTradeGroupSizeAlertThreshold">setTradeGroupSizeAlertThreshold</a></li></ul></li><li><a href="TradeGroupsPlugin.html">TradeGroupsPlugin</a><ul class='methods'><li data-type='method'><a href="TradeGroupsPlugin.html#emit">emit</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#getID">getID</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#on">on</a></li><li data-type='method'><a href="TradeGroupsPlugin.html#render">render</a></li></ul></li><li><a href="TradesDataPlugin.html">TradesDataPlugin</a><ul class='methods'><li data-type='method'><a href="TradesDataPlugin.html#emit">emit</a></li><li data-type='method'><a href="TradesDataPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="TradesDataPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="TradesDataPlugin.html#getID">getID</a></li><li data-type='method'><a href="TradesDataPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="TradesDataPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="TradesDataPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="TradesDataPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="TradesDataPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="TradesDataPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="TradesDataPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="TradesDataPlugin.html#on">on</a></li><li data-type='method'><a href="TradesDataPlugin.html#render">render</a></li></ul></li><li><a href="TradeSizeAlertsPlugin.html">TradeSizeAlertsPlugin</a><ul class='methods'><li data-type='method'><a href="TradeSizeAlertsPlugin.html#emit">emit</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getID">getID</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#getTradeSizeAlertThreshold">getTradeSizeAlertThreshold</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#on">on</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#render">render</a></li><li data-type='method'><a href="TradeSizeAlertsPlugin.html#setTradeSizeAlertThreshold">setTradeSizeAlertThreshold</a></li></ul></li><li><a href="UtilitiesPlugin.html">UtilitiesPlugin</a><ul class='methods'><li data-type='method'><a href="UtilitiesPlugin.html#emit">emit</a></li><li data-type='method'><a href="UtilitiesPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="UtilitiesPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="UtilitiesPlugin.html#getID">getID</a></li><li data-type='method'><a href="UtilitiesPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="UtilitiesPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="UtilitiesPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="UtilitiesPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="UtilitiesPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="UtilitiesPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="UtilitiesPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="UtilitiesPlugin.html#on">on</a></li><li data-type='method'><a href="UtilitiesPlugin.html#render">render</a></li></ul></li><li><a href="Widget.html">Widget</a><ul class='methods'><li data-type='method'><a href="Widget.html#emit">emit</a></li><li data-type='method'><a href="Widget.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="Widget.html#getHost">getHost</a></li><li data-type='method'><a href="Widget.html#getID">getID</a></li><li data-type='method'><a href="Widget.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="Widget.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="Widget.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="Widget.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="Widget.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="Widget.html#isUnique">isUnique</a></li><li data-type='method'><a href="Widget.html#logDuration">logDuration</a></li><li data-type='method'><a href="Widget.html#on">on</a></li><li data-type='method'><a href="Widget.html#render">render</a></li></ul></li><li><a href="WSConnectionPlugin.html">WSConnectionPlugin</a><ul class='methods'><li data-type='method'><a href="WSConnectionPlugin.html#emit">emit</a></li><li data-type='method'><a href="WSConnectionPlugin.html#getColoredID">getColoredID</a></li><li data-type='method'><a href="WSConnectionPlugin.html#getHost">getHost</a></li><li data-type='method'><a href="WSConnectionPlugin.html#getID">getID</a></li><li data-type='method'><a href="WSConnectionPlugin.html#getProvidedHooks">getProvidedHooks</a></li><li data-type='method'><a href="WSConnectionPlugin.html#getRequiredHooks">getRequiredHooks</a></li><li data-type='method'><a href="WSConnectionPlugin.html#getRequiredModules">getRequiredModules</a></li><li data-type='method'><a href="WSConnectionPlugin.html#getSymbol">getSymbol</a></li><li data-type='method'><a href="WSConnectionPlugin.html#getTerminal">getTerminal</a></li><li data-type='method'><a href="WSConnectionPlugin.html#isUnique">isUnique</a></li><li data-type='method'><a href="WSConnectionPlugin.html#logDuration">logDuration</a></li><li data-type='method'><a href="WSConnectionPlugin.html#on">on</a></li><li data-type='method'><a href="WSConnectionPlugin.html#render">render</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-Utility.html">Utility</a><ul class='methods'><li data-type='method'><a href="module-Utility.html#.measureDuration">measureDuration</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="CandlesDataPlugin.html#~event:dataCandles">dataCandles</a></li><li><a href="LoggerPlugin.html#~event:terminalDebugLog">terminalDebugLog</a></li><li><a href="LoggerPlugin.html#~event:terminalDebugLogClearLastLine">terminalDebugLogClearLastLine</a></li><li><a href="LoggerPlugin.html#~event:terminalOutputClear">terminalOutputClear</a></li><li><a href="LoggerPlugin.html#~event:terminalOutputLog">terminalOutputLog</a></li><li><a href="MarginInfoDataPlugin.html#~event:dataMarginInfo">dataMarginInfo</a></li><li><a href="MarketInfoDataPlugin.html#~event:dataMarketInfo">dataMarketInfo</a></li><li><a href="ModuleHost.html#~event:hostBoot">hostBoot</a></li><li><a href="ModuleHost.html#~event:hostError">hostError</a></li><li><a href="NotificationsPlugin.html#~event:notificationsEnabledUpdated">notificationsEnabledUpdated</a></li><li><a href="NotificationsPlugin.html#~event:notify">notify</a></li><li><a href="NotificationsPlugin.html#~event:notifyError">notifyError</a></li><li><a href="NotificationsPlugin.html#~event:notifyImportant">notifyImportant</a></li><li><a href="NotificationsPlugin.html#~event:notifySuccess">notifySuccess</a></li><li><a href="OrderBooksDataPlugin.html#~event:dataOrderBook">dataOrderBook</a></li><li><a href="OrdersDataPlugin.html#~event:dataOrderClosed">dataOrderClosed</a></li><li><a href="OrdersDataPlugin.html#~event:dataOrderCreated">dataOrderCreated</a></li><li><a href="OrdersDataPlugin.html#~event:dataOrderSnapshot">dataOrderSnapshot</a></li><li><a href="OrdersDataPlugin.html#~event:dataOrderUpdated">dataOrderUpdated</a></li><li><a href="PositionsDataPlugin.html#~event:dataPositionClosed">dataPositionClosed</a></li><li><a href="PositionsDataPlugin.html#~event:dataPositionCreated">dataPositionCreated</a></li><li><a href="PositionsDataPlugin.html#~event:dataPositionSnapshot">dataPositionSnapshot</a></li><li><a href="PositionsDataPlugin.html#~event:dataPositionUpdated">dataPositionUpdated</a></li><li><a href="TradeGroupSizeAlertsPlugin.html#~event:groupSizeAlertThresholdUpdated">groupSizeAlertThresholdUpdated</a></li><li><a href="TradeGroupsPlugin.html#~event:buyTradeGroupUpdate">buyTradeGroupUpdate</a></li><li><a href="TradeGroupsPlugin.html#~event:sellTradeGroupUpdate">sellTradeGroupUpdate</a></li><li><a href="TradesDataPlugin.html#~event:dataAccountTradeEntry">dataAccountTradeEntry</a></li><li><a href="TradesDataPlugin.html#~event:dataAccountTradeUpdate">dataAccountTradeUpdate</a></li><li><a href="TradesDataPlugin.html#~event:dataTradeEntry">dataTradeEntry</a></li><li><a href="TradeSizeAlertsPlugin.html#~event:tradeSizeAlertThresholdUpdated">tradeSizeAlertThresholdUpdated</a></li><li><a href="WSConnectionPlugin.html#~event:wsAuthenticated">wsAuthenticated</a></li><li><a href="WSConnectionPlugin.html#~event:wsClosed">wsClosed</a></li><li><a href="WSConnectionPlugin.html#~event:wsError">wsError</a></li><li><a href="WSConnectionPlugin.html#~event:wsOpened">wsOpened</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">module_host.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'

const _uniq = require('lodash/uniq')
const _values = require('lodash/values')
const _flatten = require('lodash/flatten')
const _includes = require('lodash/includes')
const AsyncEventEmitter = require('./async_event_emitter')
const ModuleAddError = require('./errors/module_add_error')
const ModuleHostBootError = require('./errors/module_host_boot_error')
const ModuleHostValidationError = require('./errors/module_host_validation_error')
const ErrorHandlerSelfTestError = require('./errors/error_handler_self_test')

/**
 * Host for a set of plugin &amp; widget modules. Validates module requirements
 * upon add and host boot
 *
 * @extends AsyncEventEmitter
 */
class ModuleHost extends AsyncEventEmitter {
  /**
   * Create new module host; initialized with empty modules array
   *
   * @todo refactor out terminal requirement (move screen into own module)
   *
   * @param {Terminal} terminal - terminal instance
   */
  constructor (terminal) {
    super()

    this.modules = []
    this.terminal = terminal
    this.booted = false
  }

  /**
   * @returns {Terminal} terminal - terminal instance
   */
  getTerminal () {
    return this.terminal
  }

  /**
   * @returns {boolean} isBooted - if true, modules are initialized and running
   */
  isBooted () {
    return this.booted
  }

  /**
   * Returns a list of all hooks provided by currently loaded modules
   *
   * @returns {string[]} hooks
   */
  getModuleProvidedHooks () {
    return _flatten(this.modules.map(m => m.getProvidedHooks()))
  }

  /**
   * Returns a list of unique provided hooks, including currently loaded
   * modules, the host hooks, and optionally any hooks provided as an argument.
   *
   * @returns {string[]} hooks
   */
  getAllProvidedHooks () {
    const moduleProvidedHooks = this.getModuleProvidedHooks()
    const hostHooks = _values(ModuleHost.HOST_PROVIDED_HOOKS)

    return _uniq(_flatten([hostHooks, moduleProvidedHooks]))
  }

  /**
   * Returns a list of all loaded module IDs
   *
   * @returns {string[]} ids
   */
  getAllModuleIDs () {
    return this.modules.map(m => m.getID())
  }

  /**
   * Add a module to the internal set; can only be done prior to
   * {@link ModuleHost#boot} call. Only module uniqueness is checked;
   * requirements are validated on {@link ModuleHost#boot} call.
   *
   * @throws {ModuleAddError} fails if module is flagged `unique` but already
   *   present in module list, or the host already booted
   *
   * @param {Class} ModuleClass - module to be added
   * @param {object} [moduleArgs] - module arguments
   */
  addModule (ModuleClass, moduleArgs) {
    if (this.isBooted()) {
      throw new ModuleAddError('Module host already booted')
    }

    const module = new ModuleClass(this, moduleArgs || {})
    const unique = module.isUnique()
    const id = module.getID()

    if (unique &amp;&amp; this.modules.find(m => m.getID() === id)) {
      throw new ModuleAddError(`Module unique but already present: ${id}`)
    }

    this.modules.push(module)
  }

  /**
   * Ensures host has all modules required to run
   *
   * @throws {ModuleHostValidationError} fails if required host module missing
   *   from module set
   */
  validateHostRequirements () {
    const hostRequiredModules = _values(ModuleHost.HOST_REQUIRED_MODULES)
    const allIDs = this.getAllModuleIDs()

    hostRequiredModules.forEach((moduleID) => {
      if (!_includes(allIDs, moduleID)) {
        throw new ModuleHostValidationError(
          `Module required by host missing ${moduleID}`
        )
      }
    })
  }

  /**
   * Ensures all modules on internal set have their requirements met
   *
   * @throws {ModuleHostValidationError} fails if a module is missing a
   *   dependency (hook or other module)
   */
  validateModuleRequirements () {
    const allHooks = this.getAllProvidedHooks()
    const allIDs = this.getAllModuleIDs()

    this.modules.forEach((module) => {
      const requiredModules = module.getRequiredModules()
      const requiredHooks = module.getRequiredHooks()
      const id = module.getID()

      requiredHooks.forEach((name) => {
        if (!_includes(allHooks, name)) {
          throw new ModuleHostValidationError([
            `Module ${id} requires missing hook ${name} but not provided by`,
            'any module'
          ].join(' '))
        }
      })

      requiredModules.forEach((requiredID) => {
        if (!_includes(allIDs, requiredID)) {
          throw new ModuleHostValidationError(
            `Module ${id} requires module ${requiredID} but not loaded`
          )
        }
      })
    })
  }

  /**
   * Validates host &amp; module requirements. If successful, tests the `hostError`
   * event to ensure it does not fail, and triggers module boot.
   *
   * @fires ModuleHost~hostBoot
   * @async
   */
  async boot () {
    if (this.isBooted()) {
      throw new ModuleHostBootError('Module host already booted')
    }

    this.validateHostRequirements()
    this.validateModuleRequirements()

    // Ensure fallback error handler does not fail itself

    /**
     * Fallback error event
     *
     * @event ModuleHost~hostError
     * @property {Error} error - error object
     */
    await this.emit('hostError', { error: new ErrorHandlerSelfTestError() })
    await (this.logDuration('module boot', false)(async () => {
      /**
       * Init hook for modules
       *
       * @event ModuleHost~hostBoot
       */
      return this.emit('hostBoot')
    }))

    this.booted = true
  }

  /**
   * Get the loaded module set
   *
   * @returns {Module[]} modules
   */
  getModules () {
    return this.modules
  }
}

/**
 * Map of hooks implemented (emitted) by the host itself.
 *
 * @property {string} HOST_ERROR - fallback error hook used when module host
 *   environment is either not ready or already failed to handle an error
 * @property {string} HOST_BOOT - hook triggered once the module host is deemed
 *   complete, and execution may begin. Plugins should use this hook to start
 *   up.
 */
ModuleHost.HOST_PROVIDED_HOOKS = {
  HOST_ERROR: 'hostError',
  HOST_BOOT: 'hostBoot'
}

/**
 * Map of minimum modules required by a host to execute; currently limited to
 * the logging and utility modules to handle boot.
 *
 * @property {string} CORE_LOGGER - {@link CoreLoggerPlugin}
 * @property {string} CORE_UTILITIES - {@link CoreUtilitiesPlugin}
 */
ModuleHost.HOST_REQUIRED_MODULES = {
  CORE_LOGGER: 'plugin:core:logger',
  CORE_UTILITIES: 'plugin:core:utilities'
}

module.exports = ModuleHost
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Tue Apr 07 2020 11:37:00 GMT+0700 (Indochina Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
